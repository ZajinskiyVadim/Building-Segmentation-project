# üìê –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø–ª–æ—â–∞–¥–∏

## –í–æ–ø—Ä–æ—Å: –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –º–∞—Å—à—Ç–∞–± –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–ª–æ—â–∞–¥–∏?

---

## üéØ –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç

**–í —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ –º–∞—Å—à—Ç–∞–± –∑–∞–¥–∞–Ω –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞: 0.3 –º–µ—Ç—Ä–∞/–ø–∏–∫—Å–µ–ª—å**

–≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∑—è—Ç–æ –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ INRIA –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ –ø–ª–æ—â–∞–¥–∏.

---

## üìä –û—Ç–∫—É–¥–∞ –≤–∑—è–ª–æ—Å—å –∑–Ω–∞—á–µ–Ω–∏–µ 0.3 –º/–ø–∏–∫—Å–µ–ª—å?

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è INRIA

–ò–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ (dataset_description.md):

```markdown
### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 180 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –§–æ—Ä–º–∞—Ç: TIFF (GeoTIFF)
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 5000 √ó 5000 –ø–∏–∫—Å–µ–ª–µ–π
- –ö–∞–Ω–∞–ª—ã: RGB (3 –∫–∞–Ω–∞–ª–∞)
- **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ~30 —Å–º/–ø–∏–∫—Å–µ–ª—å**  ‚Üê –í–û–¢ –û–ù–û!
```

**30 —Å–º = 0.3 –º–µ—Ç—Ä–∞** - —ç—Ç–æ —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –ø–∏–∫—Å–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ.

### –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?

```
1 –ø–∏–∫—Å–µ–ª—å –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ = 0.3 –º √ó 0.3 –º –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏

–ü–ª–æ—â–∞–¥—å 1 –ø–∏–∫—Å–µ–ª—è = 0.3¬≤ = 0.09 –º¬≤
```

**–ü—Ä–∏–º–µ—Ä:**
```
–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 5000 √ó 5000 –ø–∏–∫—Å–µ–ª–µ–π –ø–æ–∫—Ä—ã–≤–∞–µ—Ç:
- –®–∏—Ä–∏–Ω–∞: 5000 √ó 0.3 –º = 1,500 –º = 1.5 –∫–º
- –í—ã—Å–æ—Ç–∞: 5000 √ó 0.3 –º = 1,500 –º = 1.5 –∫–º
- –ü–ª–æ—â–∞–¥—å: 1.5 –∫–º √ó 1.5 –∫–º = 2.25 –∫–º¬≤
```

---

## üßÆ –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–ª–æ—â–∞–¥—å

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (area_calculator.py)

```python
class AreaCalculator:
    def __init__(self, pixel_size_m: float = 0.3):
        """
        Args:
            pixel_size_m: –†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è –≤ –º–µ—Ç—Ä–∞—Ö
                         –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.3–º –¥–ª—è INRIA –¥–∞—Ç–∞—Å–µ—Ç–∞
        """
        self.pixel_size_m = pixel_size_m  # 0.3 –º–µ—Ç—Ä–∞
        self.pixel_area_m2 = pixel_size_m ** 2  # 0.09 –º¬≤
```

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞

```python
def calculate_area(self, mask: np.ndarray) -> dict:
    # –®–∞–≥ 1: –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –ø–∏–∫—Å–µ–ª–∏ –∑–¥–∞–Ω–∏–π
    building_pixels = np.sum(mask == 1)
    
    # –®–∞–≥ 2: –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–ª–æ—â–∞–¥—å –≤ –º¬≤
    area_m2 = building_pixels √ó pixel_area_m2
    area_m2 = building_pixels √ó 0.09
    
    # –®–∞–≥ 3: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –≥–µ–∫—Ç–∞—Ä—ã
    area_ha = area_m2 / 10000  # 1 –≥–∞ = 10,000 –º¬≤
    
    return {
        'building_pixels': building_pixels,
        'area_m2': area_m2,
        'area_ha': area_ha
    }
```

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞ (Bellingham)

**–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ JSON:**
```json
{
  "building_pixels": 1794695,
  "area_m2": 161522.55,
  "area_ha": 16.152255
}
```

**–ö–∞–∫ —ç—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å:**

```python
# –î–∞–Ω–æ
pixel_size_m = 0.3 –º
pixel_area_m2 = 0.3 √ó 0.3 = 0.09 –º¬≤
building_pixels = 1,794,695 –ø–∏–∫—Å–µ–ª–µ–π

# –†–∞—Å—á—ë—Ç –ø–ª–æ—â–∞–¥–∏ –≤ –º¬≤
area_m2 = 1,794,695 –ø–∏–∫—Å–µ–ª–µ–π √ó 0.09 –º¬≤/–ø–∏–∫—Å–µ–ª—å
area_m2 = 161,522.55 –º¬≤

# –†–∞—Å—á—ë—Ç –ø–ª–æ—â–∞–¥–∏ –≤ –≥–µ–∫—Ç–∞—Ä–∞—Ö
area_ha = 161,522.55 –º¬≤ √∑ 10,000 –º¬≤/–≥–∞
area_ha = 16.15 –≥–∞

# –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
total_pixels = 5000 √ó 5000 = 25,000,000 –ø–∏–∫—Å–µ–ª–µ–π
coverage = (1,794,695 / 25,000,000) √ó 100%
coverage = 7.18%
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```
16.15 –≥–∞ = 161,522.55 –º¬≤ ‚úÖ
7.18% –æ—Ç 2.25 –∫–º¬≤ = 0.1615 –∫–º¬≤ ‚úÖ
```

---

## üó∫Ô∏è –û—Ç–∫—É–¥–∞ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –±–µ—Ä—ë—Ç—Å—è –º–∞—Å—à—Ç–∞–±?

### GeoTIFF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

INRIA –¥–∞—Ç–∞—Å–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **GeoTIFF —Ñ–æ—Ä–º–∞—Ç**, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:

```python
import rasterio

with rasterio.open('austin1.tif') as src:
    # Affine transform - —Å–≤—è–∑—å –ø–∏–∫—Å–µ–ª—å ‚Üî —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    transform = src.transform
    
    # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–∏–∫—Å–µ–ª—è
    pixel_width = transform.a   # —à–∏—Ä–∏–Ω–∞ –ø–∏–∫—Å–µ–ª—è –≤ –º–µ—Ç—Ä–∞—Ö
    pixel_height = -transform.e  # –≤—ã—Å–æ—Ç–∞ –ø–∏–∫—Å–µ–ª—è –≤ –º–µ—Ç—Ä–∞—Ö
    
    # –°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
    crs = src.crs
    
    print(f"Pixel size: {pixel_width} √ó {pixel_height} –º–µ—Ç—Ä–æ–≤")
    print(f"CRS: {crs}")
```

**–í—ã–≤–æ–¥:**
```
Pixel size: 0.3 √ó 0.3 –º–µ—Ç—Ä–æ–≤
CRS: EPSG:32615  (UTM Zone 15N - –¥–ª—è Austin, Texas)
```

### –ß—Ç–æ —Ç–∞–∫–æ–µ Affine Transform?

**Affine transform** - —ç—Ç–æ –º–∞—Ç—Ä–∏—Ü–∞ 3√ó3, –∫–æ—Ç–æ—Ä–∞—è —Å–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–∏–∫—Å–µ–ª—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏:

```
| a  b  c |   | x_pixel |   | x_geo |
| d  e  f | √ó | y_pixel | = | y_geo |
| 0  0  1 |   |    1    |   |   1   |
```

–ì–¥–µ:
- **a** = pixel_width (—Ä–∞–∑–º–µ—Ä –ø–æ X, –æ–±—ã—á–Ω–æ 0.3)
- **e** = -pixel_height (—Ä–∞–∑–º–µ—Ä –ø–æ Y, –æ–±—ã—á–Ω–æ -0.3, –∑–Ω–∞–∫ –º–∏–Ω—É—Å –∏–∑-–∑–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å–µ–π)
- **b, d** = rotation (–æ–±—ã—á–Ω–æ 0 –¥–ª—è –æ—Ä—Ç–æ—Ñ–æ—Ç–æ)
- **c, f** = origin (–≤–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π —É–≥–æ–ª –≤ –≥–µ–æ–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö)

**–ü—Ä–∏–º–µ—Ä –¥–ª—è Austin:**
```python
Affine transform:
| 0.3   0.0   441824.0 |
| 0.0  -0.3  3372294.0 |
| 0.0   0.0        1.0 |

–û–∑–Ω–∞—á–∞–µ—Ç:
- Pixel width: 0.3 –º
- Pixel height: 0.3 –º
- Origin: (441824, 3372294) –≤ UTM –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
```

---

## üîß –ü—Ä–æ–±–ª–µ–º–∞ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ß—Ç–æ –Ω–µ —Ç–∞–∫?

**–ú–∞—Å—à—Ç–∞–± hardcoded (–∑–∞—à–∏—Ç –≤ –∫–æ–¥ –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ 0.3)**, –∞ –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

```python
# –°–µ–π—á–∞—Å (–ø–ª–æ—Ö–æ):
calculator = AreaCalculator(pixel_size_m=0.3)  # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!

# –ü—Ä–æ–±–ª–µ–º–∞: –ß—Ç–æ –µ—Å–ª–∏ —É –¥—Ä—É–≥–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 0.5 –º/–ø–∏–∫—Å–µ–ª—å?
# –ü–ª–æ—â–∞–¥–∏ –±—É–¥—É—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
```

### –ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫?

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏:**

–í—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º **0.5 –º/–ø–∏–∫—Å–µ–ª—å**, –Ω–æ –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **0.3 –º/–ø–∏–∫—Å–µ–ª—å**:

```python
# –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
real_pixel_size = 0.5 –º
real_area_m2 = 1,000,000 –ø–∏–∫—Å–µ–ª–µ–π √ó (0.5)¬≤ = 250,000 –º¬≤

# –†–∞—Å—á—ë—Ç –≤ –∫–æ–¥–µ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!)
code_pixel_size = 0.3 –º
code_area_m2 = 1,000,000 –ø–∏–∫—Å–µ–ª–µ–π √ó (0.3)¬≤ = 90,000 –º¬≤

# –û—à–∏–±–∫–∞!
error = (250,000 - 90,000) / 250,000 √ó 100% = 64% –æ—à–∏–±–∫–∞! ‚ùå
```

---

## ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ GeoTIFF

–Ø —Å–æ–∑–¥–∞–ª —É–ª—É—á—à–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é `AreaCalculatorAdvanced`, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç:
1. –ò–∑–≤–ª–µ–∫–∞—Ç—å –º–∞—Å—à—Ç–∞–± –∏–∑ GeoTIFF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π –º–∞—Å—à—Ç–∞–±

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```python
from area_calculator_advanced import AreaCalculatorAdvanced

# –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞
calculator = AreaCalculatorAdvanced.from_geotiff('austin1.tif')
# –ú–∞—Å—à—Ç–∞–± –∏–∑–≤–ª–µ—á—ë–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: 0.3 –º/–ø–∏–∫—Å–µ–ª—å ‚úÖ

# –°–ø–æ—Å–æ–± 2: –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ (–∫–∞–∫ —Å–µ–π—á–∞—Å)
calculator = AreaCalculatorAdvanced(pixel_size_m=0.3)

# –†–∞—Å—á—ë—Ç –ø–ª–æ—â–∞–¥–∏
areas = calculator.calculate_area(mask)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ GeoTIFF —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∞
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å–æ —Å—Ç–∞—Ä—ã–º –∫–æ–¥–æ–º

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ø–æ –∏–∑–≤–µ—Å—Ç–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º

–ï—Å–ª–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –º–æ–∂–Ω–æ –∫–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –ø–æ –∏–∑–≤–µ—Å—Ç–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º:

```python
def calibrate_from_known_object(image, mask, real_area_m2):
    """
    –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –º–∞—Å—à—Ç–∞–±–∞ –ø–æ –æ–±—ä–µ–∫—Ç—É —Å –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–ª–æ—â–∞–¥—å—é
    
    Args:
        image: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        mask: –ú–∞—Å–∫–∞ –æ–±—ä–µ–∫—Ç–∞
        real_area_m2: –†–µ–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å –æ–±—ä–µ–∫—Ç–∞ –≤ –º¬≤
    
    Returns:
        pixel_size_m: –†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è –≤ –º–µ—Ç—Ä–∞—Ö
    """
    # –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –ø–∏–∫—Å–µ–ª–∏ –æ–±—ä–µ–∫—Ç–∞
    object_pixels = np.sum(mask == 1)
    
    # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–ª–æ—â–∞–¥—å –ø–∏–∫—Å–µ–ª—è
    pixel_area_m2 = real_area_m2 / object_pixels
    
    # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è
    pixel_size_m = np.sqrt(pixel_area_m2)
    
    return pixel_size_m

# –ü—Ä–∏–º–µ—Ä: –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ —Ñ—É—Ç–±–æ–ª—å–Ω–æ–µ –ø–æ–ª–µ = 7140 –º¬≤
pixel_size = calibrate_from_known_object(
    image, 
    football_field_mask, 
    real_area_m2=7140
)
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ú–∞—Å—à—Ç–∞–± –∏–∑ EXIF –∏–ª–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å–Ω–∏–º–∫–∞

–î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (JPEG —Å GPS):

```python
from PIL import Image
from PIL.ExifTags import TAGS, GPSTAGS

def extract_gsd_from_exif(image_path):
    """
    GSD = Ground Sample Distance (—Ä–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è –Ω–∞ –∑–µ–º–ª–µ)
    –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ EXIF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
    """
    img = Image.open(image_path)
    exif = img._getexif()
    
    if exif:
        # –í—ã—Å–æ—Ç–∞ –ø–æ–ª—ë—Ç–∞
        altitude = exif.get('GPSAltitude', None)
        
        # Focal length
        focal_length = exif.get('FocalLength', None)
        
        # Sensor size
        sensor_width = exif.get('SensorWidth', None)
        
        if all([altitude, focal_length, sensor_width]):
            # GSD = (altitude √ó sensor_width) / (focal_length √ó image_width)
            gsd = (altitude * sensor_width) / (focal_length * img.width)
            return gsd
    
    return None
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

| –ú–µ—Ç–æ–¥ | –¢–æ—á–Ω–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å |
|-------|----------|-----------|--------------|
| **–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ (—Ç–µ–∫—É—â–∏–π)** | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è INRIA | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è | INRIA –¥–∞—Ç–∞—Å–µ—Ç |
| **GeoTIFF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** | ‚úÖ‚úÖ‚úÖ –í—ã—Å–æ–∫–∞—è | ‚úÖ‚úÖ –°—Ä–µ–¥–Ω—è—è | GeoTIFF —Ñ–∞–π–ª—ã |
| **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ø–æ –æ–±—ä–µ–∫—Ç—É** | ‚úÖ‚úÖ –•–æ—Ä–æ—à–∞—è | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è | –õ—é–±—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| **EXIF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** | ‚úÖ –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è | ‚úÖ‚úÖ –°—Ä–µ–¥–Ω—è—è | JPEG —Å GPS |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (INRIA –¥–∞—Ç–∞—Å–µ—Ç)

**–û—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å** - –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ 0.3 –º/–ø–∏–∫—Å–µ–ª—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ –¥–ª—è INRIA:

```python
calculator = AreaCalculator(pixel_size_m=0.3)
```

**–ü–æ—á–µ–º—É?**
- ‚úÖ –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è INRIA –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç 0.3 –º/–ø–∏–∫—Å–µ–ª—å
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö

### –î–ª—è –∑–∞—â–∏—Ç—ã –¥–∏–ø–ª–æ–º–∞

**–ù–∞ –≤–æ–ø—Ä–æ—Å "–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –º–∞—Å—à—Ç–∞–±?":**

> "–ú–∞—Å—à—Ç–∞–± –∑–∞–¥–∞–Ω –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ 0.3 –º–µ—Ç—Ä–∞ –Ω–∞ –ø–∏–∫—Å–µ–ª—å, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ INRIA –¥–∞—Ç–∞—Å–µ—Ç–∞. –í—Å–µ 360 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ ~30 —Å–º/–ø–∏–∫—Å–µ–ª—å, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –æ–ø—Ä–∞–≤–¥–∞–Ω–æ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã –ø–ª–æ—â–∞–¥–∏."

**–ï—Å–ª–∏ —Å–ø—Ä–æ—Å—è—Ç "–ê –∫–∞–∫ –¥–ª—è –¥—Ä—É–≥–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤?":**

> "–î–ª—è –¥—Ä—É–≥–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ —Å –æ—Ç–ª–∏—á–∞—é—â–∏–º—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –º–æ–∂–Ω–æ: 
> 1) –ò–∑–≤–ª–µ—á—å –º–∞—Å—à—Ç–∞–± –∏–∑ GeoTIFF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (Affine transform) —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ rasterio
> 2) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–∫—É –ø–æ –æ–±—ä–µ–∫—Ç–∞–º —Å –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–ª–æ—â–∞–¥—å—é
> 3) –ò–∑–≤–ª–µ—á—å GSD –∏–∑ EXIF –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å–Ω–∏–º–∫–∞
> 
> –Ø —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é AreaCalculatorAdvanced, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ –∏–∑ GeoTIFF."

### –î–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

**–ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞–º–∏:**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `AreaCalculatorAdvanced` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º:

```python
# –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º GeoTIFF
calculator = AreaCalculatorAdvanced.from_geotiff(image_path)
areas = calculator.calculate_area(mask)
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (CRS)

INRIA –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑–Ω—ã–µ CRS –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤:

| –ì–æ—Ä–æ–¥ | CRS | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| Austin | EPSG:32615 | UTM Zone 15N |
| Chicago | EPSG:32616 | UTM Zone 16N |
| Vienna | EPSG:32633 | UTM Zone 33N |

**UTM (Universal Transverse Mercator)** - —ç—Ç–æ –º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –≥–¥–µ:
- –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è: –º–µ—Ç—Ä—ã
- –†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è —Ç–∞–∫–∂–µ –≤ –º–µ—Ç—Ä–∞—Ö
- –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø–ª–æ—â–∞–¥–µ–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—à—Ç–∞–±–∞

**–°–ø–æ—Å–æ–± 1: –ò–∑–º–µ—Ä–∏—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç**

```python
# –ù–∞–π–¥–∏—Ç–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
# –ù–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ñ—É—Ç–±–æ–ª—å–Ω–æ–µ –ø–æ–ª–µ: 105 √ó 68 –º = 7,140 –º¬≤

# –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –ø–∏–∫—Å–µ–ª–∏ —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ –º–∞—Å–∫–µ
field_pixels = 79,333 –ø–∏–∫—Å–µ–ª–µ–π

# –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ pixel_area
pixel_area_m2 = 7,140 –º¬≤ / 79,333 –ø–∏–∫—Å–µ–ª–µ–π = 0.09 –º¬≤

# –ò–∑–≤–ª–µ–∫–∏—Ç–µ pixel_size
pixel_size_m = ‚àö0.09 = 0.3 –º ‚úÖ
```

**–°–ø–æ—Å–æ–± 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—â—É—é –ø–ª–æ—â–∞–¥—å**

```python
# –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 5000 √ó 5000 –ø–∏–∫—Å–µ–ª–µ–π
# –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–µ 0.3 –º/–ø–∏–∫—Å–µ–ª—å –¥–æ–ª–∂–Ω–æ –ø–æ–∫—Ä—ã–≤–∞—Ç—å:

width_m = 5000 √ó 0.3 = 1,500 –º = 1.5 –∫–º
height_m = 5000 √ó 0.3 = 1,500 –º = 1.5 –∫–º
total_area_km2 = 1.5 √ó 1.5 = 2.25 –∫–º¬≤

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏ Google Maps / OpenStreetMap ‚úÖ
```

---

## üéì –í—ã–≤–æ–¥—ã

### –î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

1. **–ú–∞—Å—à—Ç–∞–± –∑–∞–¥–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:** 0.3 –º/–ø–∏–∫—Å–µ–ª—å –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ INRIA ‚úÖ

2. **–†–∞—Å—á—ë—Ç—ã —Ç–æ—á–Ω—ã–µ:** –§–æ—Ä–º—É–ª–∞ `area = pixels √ó (0.3)¬≤` –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è ‚úÖ

3. **–ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å:** –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π INRIA ‚úÖ

4. **–£–ª—É—á—à–µ–Ω–∏—è:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ ‚ú®

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–æ—Ä–º—É–ª—ã:

```
pixel_size_m = 0.3 –º
pixel_area_m2 = 0.09 –º¬≤

area_m2 = building_pixels √ó 0.09
area_ha = area_m2 / 10,000
coverage_% = (building_pixels / total_pixels) √ó 100
```

---

## üìé –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A: –ö–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Å—à—Ç–∞–±–∞

```python
import rasterio
import numpy as np
from pathlib import Path

def verify_inria_scale(image_path):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—à—Ç–∞–±–∞ INRIA –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"""
    
    with rasterio.open(image_path) as src:
        # –ò–∑–≤–ª–µ—á—å transform
        transform = src.transform
        
        # –†–∞–∑–º–µ—Ä –ø–∏–∫—Å–µ–ª—è
        pixel_width = abs(transform.a)
        pixel_height = abs(transform.e)
        
        # –†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        height, width = src.height, src.width
        
        # –†–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
        real_width_m = width * pixel_width
        real_height_m = height * pixel_height
        real_area_km2 = (real_width_m * real_height_m) / 1_000_000
        
        print(f"üìê –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—à—Ç–∞–±–∞")
        print(f"   –§–∞–π–ª: {Path(image_path).name}")
        print(f"   Pixel size: {pixel_width} √ó {pixel_height} –º")
        print(f"   Image size: {width} √ó {height} –ø–∏–∫—Å–µ–ª–µ–π")
        print(f"   Real size: {real_width_m:.0f} √ó {real_height_m:.0f} –º")
        print(f"   Total area: {real_area_km2:.2f} –∫–º¬≤")
        print(f"   CRS: {src.crs}")
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∂–∏–¥–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
        expected_pixel_size = 0.3
        expected_area_km2 = 2.25
        
        if abs(pixel_width - expected_pixel_size) < 0.01:
            print(f"   ‚úÖ –ú–∞—Å—à—Ç–∞–± —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç INRIA (0.3 –º/–ø–∏–∫—Å–µ–ª—å)")
        else:
            print(f"   ‚ö†Ô∏è  –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –º–∞—Å—à—Ç–∞–±! –û–∂–∏–¥–∞–ª–æ—Å—å 0.3 –º")
        
        if abs(real_area_km2 - expected_area_km2) < 0.1:
            print(f"   ‚úÖ –ü–ª–æ—â–∞–¥—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç INRIA (~2.25 –∫–º¬≤)")
        else:
            print(f"   ‚ö†Ô∏è  –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –ø–ª–æ—â–∞–¥—å! –û–∂–∏–¥–∞–ª–æ—Å—å ~2.25 –∫–º¬≤")

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
data_dir = Path("data/AerialImageDataset/train/images")
for img_path in data_dir.glob("*.tif"):
    verify_inria_scale(img_path)
    print()
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B: –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –µ–¥–∏–Ω–∏—Ü –ø–ª–æ—â–∞–¥–∏

```python
def convert_area(value, from_unit, to_unit):
    """
    –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü –ø–ª–æ—â–∞–¥–∏
    
    Args:
        value: –ó–Ω–∞—á–µ–Ω–∏–µ
        from_unit: 'm2', 'ha', 'km2', 'acres', 'sqft'
        to_unit: 'm2', 'ha', 'km2', 'acres', 'sqft'
    """
    # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –º¬≤
    to_m2 = {
        'm2': 1,
        'ha': 10_000,
        'km2': 1_000_000,
        'acres': 4_046.86,
        'sqft': 0.092903
    }
    
    # –°–Ω–∞—á–∞–ª–∞ –≤ –º¬≤, –ø–æ—Ç–æ–º –≤ —Ü–µ–ª–µ–≤—É—é –µ–¥–∏–Ω–∏—Ü—É
    value_m2 = value * to_m2[from_unit]
    result = value_m2 / to_m2[to_unit]
    
    return result

# –ü—Ä–∏–º–µ—Ä—ã
print(f"16.15 –≥–∞ = {convert_area(16.15, 'ha', 'm2'):.0f} –º¬≤")
print(f"16.15 –≥–∞ = {convert_area(16.15, 'ha', 'acres'):.2f} –∞–∫—Ä–æ–≤")
print(f"16.15 –≥–∞ = {convert_area(16.15, 'ha', 'sqft'):.0f} –∫–≤.—Ñ—É—Ç–æ–≤")
```

---

**–ê–≤—Ç–æ—Ä:** Zajinskiy Vadim
**–î–∞—Ç–∞:** –Ø–Ω–≤–∞—Ä—å 2026  
**–ü—Ä–æ–µ–∫—Ç:** INRIA Building Segmentation
